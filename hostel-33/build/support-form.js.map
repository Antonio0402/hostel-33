{"version":3,"file":"support-form.js","mappings":";;UAAA;UACA;;;;;WCDA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNA,MAAMA,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAAC,uBAAuB,CAAC;IAC5D,IAAI,CAAC,IAAI,CAACF,IAAI,EAAE;IAChB,IAAI,CAACG,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,QAAQ,CAAC,CAAC;EACjB;EAEAA,QAAQA,CAACC,CAAC,EAAE;IACV,IAAI,CAACL,IAAI,CAACM,gBAAgB,CAAC,QAAQ,EAAGD,CAAC,IAAK;MAC1CA,CAAC,CAACE,cAAc,CAAC,CAAC;MAClB,IAAI,CAACC,UAAU,CAAC,CAAC;IACnB,CAAC,CAAC;EACJ;EAEA,MAAMA,UAAUA,CAAA,EAAG;IACjB,IAAI,IAAI,CAACL,OAAO,EAAE;MAChBM,YAAY,CAAC,IAAI,CAACN,OAAO,CAAC;IAC5B;IACA,MAAMO,KAAK,GAAG,IAAI,CAACV,IAAI,CAACW,aAAa,CAAC,cAAc,CAAC,CAACC,KAAK;IAC3D,MAAMC,SAAS,GAAG,IAAI,CAACb,IAAI,CAACW,aAAa,CAAC,eAAe,CAAC;IAE1D,IAAI;MACF,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEC,mBAAmB,CAACC,MAAM,CAAC;MACrDJ,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEN,KAAK,CAAC;MAC/BI,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEC,mBAAmB,CAACE,KAAK,CAAC;MAEnD,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACJ,mBAAmB,CAACK,QAAQ,EAAE;QACzDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,YAAY,EAAEP,mBAAmB,CAACE;QACpC,CAAC;QACDM,IAAI,EAAEX;MACR,CAAC,CAAC;MAEF,MAAMY,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;MAElC,IAAID,IAAI,CAACE,OAAO,IAAI,CAACF,IAAI,CAACA,IAAI,CAACG,OAAO,EAAE;QACtC;QACA,IAAI,CAAC7B,IAAI,CAAC8B,KAAK,CAAC,CAAC;;QAEjB;QACA,IAAI,OAAOC,GAAG,KAAK,WAAW,IAAIL,IAAI,CAACA,IAAI,CAACM,QAAQ,EAAE;UACpD;UACAD,GAAG,CAACE,IAAI,CAACP,IAAI,CAACA,IAAI,CAACM,QAAQ,CAAC;UAE5B,IAAI,CAAC7B,OAAO,GAAG+B,UAAU,CAAC,MAAM;YAC9BH,GAAG,CAACI,KAAK,CAACT,IAAI,CAACA,IAAI,CAACM,QAAQ,CAAC;UAC/B,CAAC,EAAE,IAAI,CAAC;QACV;MACF,CAAC,MAAM;QACL;QACA,IAAII,YAAY,GAAG,sCAAsC;;QAEzD;QACA,IAAIV,IAAI,CAACA,IAAI,EAAE;UACbU,YAAY,GAAG,OAAOV,IAAI,CAACA,IAAI,KAAK,QAAQ,GAAGA,IAAI,CAACA,IAAI,GACrDA,IAAI,CAACA,IAAI,CAACG,OAAO,IAAIO,YAAa;QACvC;;QAEA;QACAvB,SAAS,CAACwB,SAAS,GAAG,oBAAoBD,YAAY,MAAM;MAC9D;IACF,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9CzB,SAAS,CAACwB,SAAS,GAAG,sEAAsE;IAC9F;EACF;AACF;AAEApC,QAAQ,CAACK,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAClD,IAAIR,WAAW,CAAC,CAAC;AACnB,CAAC,CAAC;AAEF,iEAAeA,WAAW,E","sources":["webpack://underscores/webpack/bootstrap","webpack://underscores/webpack/runtime/define property getters","webpack://underscores/webpack/runtime/hasOwnProperty shorthand","webpack://underscores/webpack/runtime/make namespace object","webpack://underscores/./src/js/support-form.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","class SupportForm {\n  constructor() {\n    this.form = document.getElementById('hostel33-support-form');\n    if (!this.form) return;\n    this.timeout = null;\n    this.initForm();\n  }\n\n  initForm(e) {\n    this.form.addEventListener('submit', (e) => {\n      e.preventDefault();\n      this.submitForm();\n    });\n  }\n\n  async submitForm() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n    const phone = this.form.querySelector('#phone-input').value;\n    const messageEl = this.form.querySelector('.form-message');\n\n    try {\n      const formData = new FormData();\n      formData.append('action', supportFormAjaxData.action);\n      formData.append('phone', phone);\n      formData.append('nonce', supportFormAjaxData.nonce);\n\n      const response = await fetch(supportFormAjaxData.ajax_url, {\n        method: 'POST',\n        headers: {\n          'X-WP-Nonce': supportFormAjaxData.nonce\n        },\n        body: formData\n      });\n\n      const data = await response.json();\n\n      if (data.success && !data.data.message) {\n        // Reset form\n        this.form.reset();\n\n        // Trigger Popup Maker popup\n        if (typeof PUM !== 'undefined' && data.data.popup_id) {\n          /* Only open in 5s then close it*/\n          PUM.open(data.data.popup_id);\n\n          this.timeout = setTimeout(() => {\n            PUM.close(data.data.popup_id);\n          }, 1000);\n        }\n      } else {\n        // Error case - wp_send_json_error() response\n        let errorMessage = 'An error occurred during submission.';\n\n        // Extract error message from WordPress response\n        if (data.data) {\n          errorMessage = typeof data.data === 'string' ? data.data :\n            (data.data.message || errorMessage);\n        }\n\n        // Show error message\n        messageEl.innerHTML = `<p class=\"error\">${errorMessage}</p>`;\n      }\n    } catch (error) {\n      console.error('Form submission error:', error);\n      messageEl.innerHTML = '<p class=\"error\">An unexpected error occurred. Please try again.</p>';\n    }\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  new SupportForm();\n});\n\nexport default SupportForm;"],"names":["SupportForm","constructor","form","document","getElementById","timeout","initForm","e","addEventListener","preventDefault","submitForm","clearTimeout","phone","querySelector","value","messageEl","formData","FormData","append","supportFormAjaxData","action","nonce","response","fetch","ajax_url","method","headers","body","data","json","success","message","reset","PUM","popup_id","open","setTimeout","close","errorMessage","innerHTML","error","console"],"sourceRoot":""}